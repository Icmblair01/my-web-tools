<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOX-2001</title>
    <link rel="apple-touch-icon" href="vox-2001-icon.png">
    <link rel="manifest" href="manifest.json">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: 
                linear-gradient(135deg, #8b7d6b 0%, #796d5a 25%, #6b5f4c 50%, #5d5245 75%, #4f453a 100%),
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(100, 88, 72, 0.03) 2px,
                    rgba(100, 88, 72, 0.03) 4px
                ),
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 2px,
                    rgba(100, 88, 72, 0.03) 2px,
                    rgba(100, 88, 72, 0.03) 4px
                );
            color: #8b7d6b;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(120, 105, 85, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 60%, rgba(100, 85, 70, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(80, 70, 55, 0.04) 0%, transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        .container {
            position: relative;
            z-index: 2;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .title {
            text-align: center;
            margin-bottom: 30px;
            letter-spacing: 4px;
            text-transform: uppercase;
        }

        .title h1 {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: #ff6b35;
            text-shadow: 
                -1px -1px 0px #000000,
                1px -1px 0px #000000,
                -1px 1px 0px #000000,
                1px 1px 0px #000000,
                0px 2px 4px rgba(0, 0, 0, 0.3);
            animation: pulse 3s ease-in-out infinite;
        }

        .title p {
            font-size: clamp(0.8rem, 2vw, 1rem);
            color: #c4b5a3;
            margin-top: 10px;
            opacity: 0.9;
            font-weight: 500;
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.2),
                0px 1px 2px rgba(0, 0, 0, 0.4);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.3));
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .controls-panel {
            background: linear-gradient(145deg, #e5d8c1, #d1c4a7);
            border: 2px solid #ff6b35;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            width: 100%;
            max-width: 600px;
            box-shadow: 
                0 0 30px rgba(255, 107, 53, 0.3),
                inset 0 0 20px rgba(255, 107, 53, 0.1),
                inset 2px 2px 4px rgba(255, 255, 255, 0.4),
                inset -2px -2px 4px rgba(139, 125, 107, 0.3);
        }

        .effects-toggle {
            background: #ff6b35;
            color: #444444;
            border: 2px solid #000000;
            padding: 12px 24px;
            border-radius: 5px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            width: 100%;
            margin-bottom: 15px;
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.4),
                0px 1px 2px rgba(0, 0, 0, 0.3);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.2));
        }

        .effects-toggle:hover {
            background: #ffffff;
            box-shadow: 0 0 20px #ff6b35;
        }

        .effects-panel {
            display: none;
            animation: slideDown 0.3s ease;
        }

        .effects-panel.active {
            display: block;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .effect-control {
            margin-bottom: 15px;
        }

        .effect-control label {
            display: block;
            color: #5d5445;
            margin-bottom: 5px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: bold;
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.5),
                0px 1px 1px rgba(0, 0, 0, 0.2);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.15));
        }

        .effect-control input[type="range"] {
            width: 100%;
            height: 6px;
            background: #a69885;
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        .effect-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: #ff6b35;
            border: 2px solid #000000;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px #ff6b35;
        }

        .soundboard {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 40px;
        }

        .sound-pad {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #e8dcc6, #d4c5a9);
            border: 2px solid #a69885;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            font-size: clamp(0.8rem, 2.5vw, 1rem);
            text-align: center;
            padding: 10px;
            color: #5d5445;
            box-shadow: 
                2px 2px 4px rgba(139, 125, 107, 0.3),
                inset 1px 1px 2px rgba(255, 255, 255, 0.4);
        }

        .sound-pad:hover {
            border-color: #ff6b35;
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.5);
        }

        .sound-pad.active {
            background: linear-gradient(145deg, #ff6b35, #e55a2b);
            border-color: #ffffff;
            color: #000;
            transform: scale(0.95);
            box-shadow: 
                0 0 30px #ff6b35,
                inset 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .sound-pad .frequency {
            font-weight: bold;
            margin-bottom: 5px;
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.6),
                0px 1px 2px rgba(0, 0, 0, 0.3),
                inset 0px 1px 0px rgba(255, 255, 255, 0.4);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.2));
        }

        .sound-pad .description {
            font-size: 0.75em;
            opacity: 0.85;
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.5),
                0px 1px 1px rgba(0, 0, 0, 0.25);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.15));
        }

        .sound-pad.kill-switch {
            background: 
                radial-gradient(circle at 30% 30%, #ff4444, #cc0000),
                radial-gradient(circle at 70% 70%, #990000, #660000);
            border: 2px solid #2a2a2a;
            color: #ffcccc;
            box-shadow: 
                0 0 20px rgba(255, 0, 0, 0.4),
                inset 2px 2px 6px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(255, 100, 100, 0.2),
                2px 2px 4px rgba(139, 125, 107, 0.3);
            position: relative;
        }

        .sound-pad.kill-switch .frequency {
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.3),
                0px 1px 2px rgba(0, 0, 0, 0.5),
                inset 0px 1px 0px rgba(255, 255, 255, 0.2);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.4));
        }

        .sound-pad.kill-switch .description {
            text-shadow: 
                1px 1px 0px rgba(255, 255, 255, 0.2),
                0px 1px 2px rgba(0, 0, 0, 0.4);
            filter: drop-shadow(0px -1px 0px rgba(0, 0, 0, 0.3));
        }

        .sound-pad.kill-switch::before {
            content: '';
            position: absolute;
            top: 4px;
            left: 4px;
            right: 4px;
            bottom: 4px;
            border: 1px solid rgba(0, 0, 0, 0.4);
            border-radius: 8px;
            pointer-events: none;
        }

        .sound-pad.kill-switch:hover {
            border-color: #000000;
            box-shadow: 
                0 0 30px rgba(255, 0, 0, 0.6),
                inset 2px 2px 6px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(255, 100, 100, 0.2),
                2px 2px 4px rgba(139, 125, 107, 0.3);
        }

        .sound-pad.kill-switch:active {
            transform: scale(0.95);
            box-shadow: 
                0 0 15px rgba(255, 0, 0, 0.3),
                inset 3px 3px 8px rgba(0, 0, 0, 0.4),
                inset -1px -1px 4px rgba(255, 100, 100, 0.1);
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .soundboard {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .controls-panel {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">
            <h1>VOX-2001</h1>
            <p>Calming Frequencies for Deep Space Meditation</p>
        </div>

        <div class="controls-panel">
            <button class="effects-toggle" id="effectsToggle">
                Audio Effects Control
            </button>
            <div class="effects-panel" id="effectsPanel">
                <div class="effect-control">
                    <label for="reverb">Reverb</label>
                    <input type="range" id="reverb" min="0" max="100" value="20">
                </div>
                <div class="effect-control">
                    <label for="echo">Echo</label>
                    <input type="range" id="echo" min="0" max="100" value="15">
                </div>
                <div class="effect-control">
                    <label for="distortion">Distortion</label>
                    <input type="range" id="distortion" min="0" max="100" value="5">
                </div>
            </div>
        </div>

        <div class="soundboard" id="soundboard">
            <div class="sound-pad" data-freq="40" data-type="binaural">
                <div class="frequency">40 Hz</div>
                <div class="description">Gamma Focus</div>
            </div>
            <div class="sound-pad" data-freq="528" data-type="tone">
                <div class="frequency">528 Hz</div>
                <div class="description">Love Freq</div>
            </div>
            <div class="sound-pad" data-freq="6" data-type="binaural">
                <div class="frequency">6 Hz</div>
                <div class="description">Theta Deep</div>
            </div>
            <div class="sound-pad" data-freq="white" data-type="noise">
                <div class="frequency">White</div>
                <div class="description">Noise</div>
            </div>
            <div class="sound-pad" data-freq="brown" data-type="noise">
                <div class="frequency">Brown</div>
                <div class="description">Noise</div>
            </div>
            <div class="sound-pad" data-freq="pink" data-type="noise">
                <div class="frequency">Pink</div>
                <div class="description">Noise</div>
            </div>
            <div class="sound-pad" data-freq="rain" data-type="nature">
                <div class="frequency">Rain</div>
                <div class="description">Ambience</div>
            </div>
            <div class="sound-pad kill-switch" id="killSwitchPad">
                <div class="frequency">Kill</div>
                <div class="description"></div>
            </div>
        </div>
    </div>

    <script>
        class AudioManager {
            constructor() {
                this.audioContext = null;
                this.activeSounds = new Map();
                this.masterGain = null;
                this.reverb = null;
                this.echo = null;
                this.distortion = null;
                this.init();
            }

            async init() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.masterGain = this.audioContext.createGain();
                    this.masterGain.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                    
                    this.setupEffects();
                    
                    this.masterGain.connect(this.reverb.input);
                    this.reverb.output.connect(this.echo.input);
                    this.echo.output.connect(this.distortion.input);
                    this.distortion.output.connect(this.audioContext.destination);
                    
                } catch (error) {
                    console.error('Audio initialization failed:', error);
                }
            }

            setupEffects() {
                this.reverb = {
                    input: this.audioContext.createGain(),
                    output: this.audioContext.createGain(),
                    wet: this.audioContext.createGain(),
                    dry: this.audioContext.createGain(),
                    convolver: this.audioContext.createConvolver()
                };

                this.reverb.input.connect(this.reverb.dry);
                this.reverb.input.connect(this.reverb.convolver);
                this.reverb.convolver.connect(this.reverb.wet);
                this.reverb.dry.connect(this.reverb.output);
                this.reverb.wet.connect(this.reverb.output);

                this.createReverbImpulse();

                this.echo = {
                    input: this.audioContext.createGain(),
                    output: this.audioContext.createGain(),
                    delay: this.audioContext.createDelay(1),
                    feedback: this.audioContext.createGain(),
                    wet: this.audioContext.createGain()
                };

                this.echo.input.connect(this.echo.output);
                this.echo.input.connect(this.echo.delay);
                this.echo.delay.connect(this.echo.feedback);
                this.echo.feedback.connect(this.echo.delay);
                this.echo.delay.connect(this.echo.wet);
                this.echo.wet.connect(this.echo.output);

                this.echo.delay.delayTime.setValueAtTime(0.3, this.audioContext.currentTime);
                this.echo.feedback.gain.setValueAtTime(0.3, this.audioContext.currentTime);

                this.distortion = {
                    input: this.audioContext.createGain(),
                    output: this.audioContext.createGain(),
                    shaper: this.audioContext.createWaveShaper()
                };

                this.distortion.input.connect(this.distortion.shaper);
                this.distortion.shaper.connect(this.distortion.output);
                this.createDistortionCurve();
            }

            createReverbImpulse() {
                const length = this.audioContext.sampleRate * 2;
                const impulse = this.audioContext.createBuffer(2, length, this.audioContext.sampleRate);
                
                for (let channel = 0; channel < 2; channel++) {
                    const channelData = impulse.getChannelData(channel);
                    for (let i = 0; i < length; i++) {
                        channelData[i] = (Math.random() * 2 - 1) * Math.pow(1 - i / length, 2);
                    }
                }
                
                this.reverb.convolver.buffer = impulse;
            }

            createDistortionCurve() {
                const samples = 44100;
                const curve = new Float32Array(samples);
                const deg = Math.PI / 180;
                
                for (let i = 0; i < samples; i++) {
                    const x = (i * 2) / samples - 1;
                    curve[i] = ((3 + 20) * x * 20 * deg) / (Math.PI + 20 * Math.abs(x));
                }
                
                this.distortion.shaper.curve = curve;
                this.distortion.shaper.oversample = '4x';
            }

            async startSound(freq, type) {
                if (!this.audioContext) return;

                if (this.audioContext.state === 'suspended') {
                    await this.audioContext.resume();
                }

                const soundId = `${freq}_${type}`;
                
                if (this.activeSounds.has(soundId)) {
                    this.stopSound(soundId);
                    return;
                }

                let oscillator, noise, gain;
                gain = this.audioContext.createGain();
                gain.gain.setValueAtTime(0, this.audioContext.currentTime);
                gain.gain.linearRampToValueAtTime(0.15, this.audioContext.currentTime + 0.1);

                if (type === 'binaural') {
                    const osc1 = this.audioContext.createOscillator();
                    const osc2 = this.audioContext.createOscillator();
                    const merger = this.audioContext.createChannelMerger(2);
                    
                    osc1.frequency.setValueAtTime(200, this.audioContext.currentTime);
                    osc2.frequency.setValueAtTime(200 + freq, this.audioContext.currentTime);
                    
                    osc1.type = 'sine';
                    osc2.type = 'sine';
                    
                    osc1.connect(merger, 0, 0);
                    osc2.connect(merger, 0, 1);
                    merger.connect(gain);
                    
                    osc1.start();
                    osc2.start();
                    
                    oscillator = { osc1, osc2 };
                } else if (type === 'tone') {
                    oscillator = this.audioContext.createOscillator();
                    oscillator.frequency.setValueAtTime(freq, this.audioContext.currentTime);
                    oscillator.type = 'sine';
                    oscillator.connect(gain);
                    oscillator.start();
                } else if (type === 'noise') {
                    noise = this.createNoise(freq);
                    noise.connect(gain);
                    noise.start();
                } else if (type === 'nature') {
                    noise = this.createRainSound();
                    noise.connect(gain);
                    noise.start();
                }

                gain.connect(this.masterGain);
                
                this.activeSounds.set(soundId, { oscillator, noise, gain });
            }

            createNoise(type) {
                const bufferSize = this.audioContext.sampleRate * 2;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const output = buffer.getChannelData(0);

                if (type === 'brown') {
                    let lastOut = 0.0;
                    for (let i = 0; i < bufferSize; i++) {
                        const white = Math.random() * 2 - 1;
                        output[i] = (lastOut + (0.02 * white)) / 1.02;
                        lastOut = output[i];
                        output[i] *= 3.5;
                    }
                } else if (type === 'pink') {
                    let b0 = 0, b1 = 0, b2 = 0, b3 = 0, b4 = 0, b5 = 0, b6 = 0;
                    for (let i = 0; i < bufferSize; i++) {
                        const white = Math.random() * 2 - 1;
                        b0 = 0.99886 * b0 + white * 0.0555179;
                        b1 = 0.99332 * b1 + white * 0.0750759;
                        b2 = 0.96900 * b2 + white * 0.1538520;
                        b3 = 0.86650 * b3 + white * 0.3104856;
                        b4 = 0.55000 * b4 + white * 0.5329522;
                        b5 = -0.7616 * b5 - white * 0.0168980;
                        output[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;
                        output[i] *= 0.11;
                        b6 = white * 0.115926;
                    }
                } else if (type === 'white') {
                    for (let i = 0; i < bufferSize; i++) {
                        output[i] = Math.random() * 2 - 1;
                    }
                }

                const source = this.audioContext.createBufferSource();
                source.buffer = buffer;
                source.loop = true;
                return source;
            }

            createRainSound() {
                const bufferSize = this.audioContext.sampleRate * 4;
                const buffer = this.audioContext.createBuffer(1, bufferSize, this.audioContext.sampleRate);
                const output = buffer.getChannelData(0);

                for (let i = 0; i < bufferSize; i++) {
                    let sample = 0;
                    for (let j = 0; j < 10; j++) {
                        const freq = 100 + Math.random() * 2000;
                        const phase = Math.random() * Math.PI * 2;
                        sample += Math.sin(2 * Math.PI * freq * i / this.audioContext.sampleRate + phase) * Math.random() * 0.1;
                    }
                    sample += (Math.random() * 2 - 1) * 0.3;
                    output[i] = sample * 0.2;
                }

                const source = this.audioContext.createBufferSource();
                source.buffer = buffer;
                source.loop = true;
                return source;
            }

            stopSound(soundId) {
                if (this.activeSounds.has(soundId)) {
                    const sound = this.activeSounds.get(soundId);
                    
                    sound.gain.gain.linearRampToValueAtTime(0, this.audioContext.currentTime + 0.1);
                    
                    setTimeout(() => {
                        if (sound.oscillator) {
                            if (sound.oscillator.osc1) {
                                sound.oscillator.osc1.stop();
                                sound.oscillator.osc2.stop();
                            } else {
                                sound.oscillator.stop();
                            }
                        }
                        if (sound.noise) {
                            sound.noise.stop();
                        }
                        sound.gain.disconnect();
                    }, 150);
                    
                    this.activeSounds.delete(soundId);
                }
            }

            stopAll() {
                for (const [soundId] of this.activeSounds) {
                    this.stopSound(soundId);
                }
            }

            setReverbAmount(amount) {
                if (this.reverb) {
                    this.reverb.wet.gain.setValueAtTime(amount / 100, this.audioContext.currentTime);
                    this.reverb.dry.gain.setValueAtTime(1 - amount / 100, this.audioContext.currentTime);
                }
            }

            setEchoAmount(amount) {
                if (this.echo) {
                    this.echo.wet.gain.setValueAtTime(amount / 100, this.audioContext.currentTime);
                }
            }

            setDistortionAmount(amount) {
                if (this.distortion) {
                    const gain = 1 + (amount / 100) * 9;
                    this.distortion.input.gain.setValueAtTime(gain, this.audioContext.currentTime);
                }
            }
        }

        const audioManager = new AudioManager();

        document.getElementById('effectsToggle').addEventListener('click', () => {
            const panel = document.getElementById('effectsPanel');
            panel.classList.toggle('active');
        });

        document.getElementById('reverb').addEventListener('input', (e) => {
            audioManager.setReverbAmount(e.target.value);
        });

        document.getElementById('echo').addEventListener('input', (e) => {
            audioManager.setEchoAmount(e.target.value);
        });

        document.getElementById('distortion').addEventListener('input', (e) => {
            audioManager.setDistortionAmount(e.target.value);
        });

        document.getElementById('soundboard').addEventListener('click', (e) => {
            const pad = e.target.closest('.sound-pad');
            if (pad) {
                if (pad.id === 'killSwitchPad') {
                    audioManager.stopAll();
                    document.querySelectorAll('.sound-pad').forEach(p => {
                        p.classList.remove('active');
                    });
                    return;
                }
                
                const freq = pad.dataset.freq;
                const type = pad.dataset.type;
                const soundId = `${freq}_${type}`;
                
                if (audioManager.activeSounds.has(soundId)) {
                    pad.classList.remove('active');
                } else {
                    pad.classList.add('active');
                }
                
                audioManager.startSound(freq, type);
            }
        });

        audioManager.setReverbAmount(20);
        audioManager.setEchoAmount(15);
        audioManager.setDistortionAmount(5);
    </script>
</body>
</html>
